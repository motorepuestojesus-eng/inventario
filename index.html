<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Inventario - Tasa BCV</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.5rem; }
        .bcv-card { border-left: 5px solid #059669; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">

    <header class="bg-slate-800 text-white sticky top-0 z-50 shadow-lg">
        <div class="max-w-7xl mx-auto p-4">
            <div class="flex flex-wrap justify-between items-center mb-4">
                <h1 class="text-xl font-bold">游닍 Inventario General</h1>
                <div class="bg-green-600 px-4 py-2 rounded-lg font-mono text-sm">
                    Tasa BCV: <input type="number" id="tasaBCV" value="37.50" step="0.01" class="bg-transparent font-bold w-16 outline-none text-white"> BS
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
                <input type="text" id="f_producto" placeholder="Producto..." class="p-2 rounded bg-slate-700 border-none text-white placeholder-slate-400 focus:ring-2 focus:ring-green-500" oninput="filtrar()">
                <input type="text" id="f_marca" placeholder="Marca..." class="p-2 rounded bg-slate-700 border-none text-white placeholder-slate-400 focus:ring-2 focus:ring-green-500" oninput="filtrar()">
                <input type="text" id="f_modelo" placeholder="Modelo..." class="p-2 rounded bg-slate-700 border-none text-white placeholder-slate-400 focus:ring-2 focus:ring-green-500" oninput="filtrar()">
                <input type="text" id="f_proveedor" placeholder="Proveedor..." class="p-2 rounded bg-slate-700 border-none text-white placeholder-slate-400 focus:ring-2 focus:ring-green-500" oninput="filtrar()">
            </div>
            <p class="text-xs mt-2 text-slate-400">Mostrando <span id="count">0</span> productos de 10,000</p>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-6">
        <div id="contenedor" class="product-grid">
            </div>
    </main>

    <script>
        let dataGlobal = [];

        // 1. Generar 10,000 productos (Simulaci칩n de carga masiva)
        function generarData() {
            const marcas = ["Samsung", "Apple", "Xiaomi", "Oster", "LG", "Sony", "HP"];
            const proveedores = ["Distribuidora Oriente", "Importaciones Caracas", "Mundo Tech", "Aliado Global"];
            const tipos = ["Tel칠fono", "Laptop", "Licuadora", "Monitor", "C치mara"];

            for (let i = 1; i <= 10000; i++) {
                dataGlobal.push({
                    id: i,
                    producto: tipos[i % tipos.length],
                    marca: marcas[i % marcas.length],
                    modelo: `Mod-${i + 100}`,
                    proveedor: proveedores[i % proveedores.length],
                    precio_usd: (Math.random() * (500 - 10) + 10).toFixed(2),
                    stock: Math.floor(Math.random() * 50)
                });
            }
            filtrar();
        }

        // 2. Motor de filtrado y conversi칩n de moneda
        function filtrar() {
            const t_prod = document.getElementById('f_producto').value.toLowerCase();
            const t_marc = document.getElementById('f_marca').value.toLowerCase();
            const t_mod = document.getElementById('f_modelo').value.toLowerCase();
            const t_prov = document.getElementById('f_proveedor').value.toLowerCase();
            const tasa = parseFloat(document.getElementById('tasaBCV').value) || 1;

            const filtrados = dataGlobal.filter(p => 
                p.producto.toLowerCase().includes(t_prod) &&
                p.marca.toLowerCase().includes(t_marc) &&
                p.modelo.toLowerCase().includes(t_mod) &&
                p.proveedor.toLowerCase().includes(t_prov)
            );

            renderizar(filtrados, tasa);
        }

        // 3. Renderizado eficiente (Muestra los primeros 100 para no trabar el PC)
        function renderizar(lista, tasa) {
            const contenedor = document.getElementById('contenedor');
            const count = document.getElementById('count');
            count.innerText = lista.length.toLocaleString();
            
            contenedor.innerHTML = "";
            const frag = document.createDocumentFragment();

            lista.slice(0, 200).forEach(p => {
                // REGLA DE NEGOCIO: Conversi칩n autom치tica a BS
                const precioBS = (p.precio_usd * tasa).toLocaleString('es-VE', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

                const card = document.createElement('div');
                card.className = "bg-white p-4 rounded-lg shadow-sm bcv-card hover:shadow-md transition-shadow";
                card.innerHTML = `
                    <div class="text-xs font-bold text-blue-600 mb-1 uppercase">${p.marca} | ${p.proveedor}</div>
                    <div class="text-lg font-bold text-slate-800">${p.producto}</div>
                    <div class="text-sm text-slate-500 mb-3 italic">${p.modelo}</div>
                    
                    <div class="bg-slate-50 p-2 rounded border border-slate-100">
                        <div class="text-xs text-slate-400">Precio Divisa</div>
                        <div class="text-md font-semibold text-slate-700">$${p.precio_usd}</div>
                        <div class="text-xs text-slate-400 mt-1">Precio al cambio (BCV)</div>
                        <div class="text-xl font-black text-emerald-600">Bs. ${precioBS}</div>
                    </div>
                    
                    <div class="mt-3 flex justify-between items-center text-xs">
                        <span class="text-slate-400 font-mono">ID: #${p.id}</span>
                        <span class="px-2 py-1 bg-slate-200 rounded font-bold">Stock: ${p.stock}</span>
                    </div>
                `;
                frag.appendChild(card);
            });

            contenedor.appendChild(frag);
        }

        // Iniciar
        document.getElementById('tasaBCV').addEventListener('input', filtrar);
        generarData();
    </script>
</body>
</html>
