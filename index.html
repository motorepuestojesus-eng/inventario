<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventario Masivo - Control BCV</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f4; padding: 20px; }
        .controls { background: white; padding: 20px; border-radius: 8px; position: sticky; top: 10px; z-index: 100; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        #lista-productos { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; margin-top: 20px; }
        .card { background: white; padding: 15px; border-radius: 8px; border: 1px solid #ddd; }
        .precio-bs { color: #27ae60; font-weight: bold; }
        .precio-usd { color: #2980b9; }
        input { padding: 8px; width: 200px; }
    </style>
</head>
<body>

    <div class="controls">
        <h2>Gestión de Inventario</h2>
        <input type="text" id="buscador" placeholder="Buscar producto..." onkeyup="filtrar()">
        <p>Tasa BCV del día: <strong id="tasa-display">--</strong> BS</p>
    </div>

    <div id="lista-productos">
        </div>

    <script>
        // Configuración inicial
        const tasaBCV = 37.50; // Ajustar según la tasa del día
        document.getElementById('tasa-display').innerText = tasaBCV;

        // Simulamos la carga de 10,000 productos
        // En un caso real, aquí usarías: fetch('tu_archivo_productos.json')
        let inventario = Array.from({ length: 10000 }, (_, i) => ({
            id: i + 1,
            nombre: `Producto ${i + 1}`,
            precio_usd: (Math.random() * 100).toFixed(2),
            stock: Math.floor(Math.random() * 500)
        }));

        function mostrarProductos(data) {
            const contenedor = document.getElementById('lista-productos');
            contenedor.innerHTML = "";
            
            // Limitamos a los primeros 100 por rendimiento al renderizar
            const vistaPrevia = data.slice(0, 100); 

            vistaPrevia.forEach(p => {
                // REGLA: Si el pago no es Divisa, convertir a BS según tasa BCV
                const precioBS = (p.precio_usd * tasaBCV).toFixed(2);
                
                const div = document.createElement('div');
                div.className = 'card';
                div.innerHTML = `
                    <h4>${p.nombre}</h4>
                    <p class="precio-usd">Ref: $${p.precio_usd}</p>
                    <p class="precio-bs">BS: ${precioBS}</p>
                    <small>Stock: ${p.stock}</small>
                `;
                contenedor.appendChild(div);
            });
        }

        function filtrar() {
            const termino = document.getElementById('buscador').value.toLowerCase();
            const filtrados = inventario.filter(p => 
                p.nombre.toLowerCase().includes(termino)
            );
            mostrarProductos(filtrados);
        }

        // Carga inicial
        mostrarProductos(inventario);
    </script>
</body>
</html>
